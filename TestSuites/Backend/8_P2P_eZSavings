*** Settings ***
Documentation       Test Genie Onboarding API's

Library    RequestsLibrary
Library    Collections
Library    OperatingSystem
Library    String
Library    JSONLibrary
Library    DatabaseLibrary
Resource    ../../KeywordLibraries/Backend/Backend_CommonKeywords.robot

*** Variables ***

*** Test Cases ***
POST /api/tokenization/p2p/sof
    [Tags]    P2P_eZCash    Regression

    #    1. Send request: GET /api/tokenization/p2p/sof
	#    2. Verify response status code: 200

    ${request_headers}=    Backend_CommonKeywords.Token_Headers
    ${response}=    Backend_CommonKeywords.Calling_API_GET    GET    ${BACKEND_URL}/api/tokenization/p2p/sof    200    ${request_headers}    ${timeout}

    #    3. Verify json response body message: STATUS: SUCCESS

    Backend_CommonKeywords.Validating_Response_Message    ${response.content}    STATUS    SUCCESS
    
    SOF_Account_Numbers_Finder    ${response.content}    ezsavings    ${P2P_EZSAVINGS_WITHOUT_OTP_TXN_REQUEST}    maskedAccountNumber

POST /api/tokenization/p2p/txn/request
    [Tags]    P2P_eZSavings    Regression

    #    1. Send request: POST /api/tokenization/p2p/txn/request
	#    2. Verify response status code: 200

    ${request_headers}=    Backend_CommonKeywords.Token_Headers
    ${response}=    Backend_CommonKeywords.Calling_API_POST    POST    ${BACKEND_URL}/api/tokenization/p2p/txn/request   200    ${P2P_EZSAVINGS_WITHOUT_OTP_TXN_REQUEST}    ${request_headers}    ${timeout}
    
    #    3. Verify json response body message: STATUS: SUCCESS

    Backend_CommonKeywords.Validating_Response_Message    ${response.content}    STATUS    SUCCESS